# TypeScript Type Cleaner

ä¸€ä¸ªé«˜æ•ˆçš„ TypeScript é¡¹ç›®ç±»å‹åˆ†æå’Œæ¸…ç†å·¥å…·ã€‚è‡ªåŠ¨å‘ç°æœªä½¿ç”¨çš„ç±»å‹å®šä¹‰ã€é‡å¤å®šä¹‰å’Œç±»å‹é”™è¯¯ï¼Œå¸®ä½ ä¿æŒä»£ç æ•´æ´ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹

```bash
# å…¨å±€å®‰è£…
npm install -g ts-type-cleaner

# æˆ–è€…ç›´æ¥ä½¿ç”¨
npx ts-type-cleaner analyze
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ” æ™ºèƒ½åˆ†æ**ï¼šæ·±åº¦æ‰«æé¡¹ç›®ï¼Œç²¾ç¡®è¯†åˆ«ç±»å‹ä½¿ç”¨æƒ…å†µ
- **ğŸ§¹ è‡ªåŠ¨æ¸…ç†**ï¼šæ‰¾å‡ºæœªä½¿ç”¨çš„ç±»å‹å®šä¹‰å’Œé‡å¤å£°æ˜
- **ğŸ”§ ç±»å‹éªŒè¯**ï¼šæ£€æŸ¥ TypeScript ç¼–è¯‘é”™è¯¯å’Œä»£ç è´¨é‡é—®é¢˜
- **ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„ HTML/Markdown æŠ¥å‘Š
- **âš¡ CI/CD å‹å¥½**ï¼šæ”¯æŒå¿«é€Ÿæ£€æŸ¥æ¨¡å¼ï¼Œé€‚åˆæŒç»­é›†æˆ

## ğŸš€ åŸºæœ¬ç”¨æ³•

### å¿«é€Ÿåˆ†æ

```bash
# åˆ†æå½“å‰é¡¹ç›®
ts-type-cleaner analyze

# æŒ‡å®šç›®å½•å’Œé˜ˆå€¼
ts-type-cleaner analyze --root ./src --threshold 85
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ› ï¸ TypeScript ç±»å‹åˆ†ææŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š åˆ†æç»Ÿè®¡

   ğŸ“ æºæ–‡ä»¶        45
   ğŸ¯ ç±»å‹å®šä¹‰      120
   âŒ æœªä½¿ç”¨ç±»å‹    12
   âš ï¸ é‡å¤å®šä¹‰      3
   ğŸ’¯ å¥åº·è¯„åˆ†      85/100

ğŸ’¡ æ”¹è¿›å»ºè®®

   1. ğŸ’¡ å‘ç° 12 ä¸ªæœªä½¿ç”¨çš„ç±»å‹å®šä¹‰ï¼Œå»ºè®®æ¸…ç†
   2. âš ï¸ å‘ç° 3 ä¸ªé‡å¤çš„ç±»å‹å®šä¹‰ï¼Œå»ºè®®åˆå¹¶
```

### ç±»å‹éªŒè¯

```bash
# åŸºç¡€éªŒè¯
ts-type-cleaner validate

# ä¸¥æ ¼æ¨¡å¼+è¯¦ç»†é”™è¯¯
ts-type-cleaner validate --strict --format
```

**ç¾åŒ–è¾“å‡ºæ•ˆæœï¼š**
```
ğŸ”§ ç±»å‹éªŒè¯ç»“æœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸš¨ é”™è¯¯è¯¦æƒ…

   1. src/components/UserCard.tsx:15
      â–¶ Property 'username' does not exist on type 'User'

   2. src/utils/helper.ts:8
      â–¶ Cannot find name 'debounce'
```

### å®Œæ•´æ£€æŸ¥

```bash
# åˆ†æ + éªŒè¯ + ç”ŸæˆæŠ¥å‘Š
ts-type-cleaner check --format html

# è‡ªåŠ¨æ‰“å¼€æŠ¥å‘Š
ts-type-cleaner check --format html --output ./reports
```

## ğŸ“‹ å‘½ä»¤å‚è€ƒ

### `analyze` - ç±»å‹ä½¿ç”¨åˆ†æ

æ·±åº¦åˆ†æé¡¹ç›®ä¸­çš„ç±»å‹å®šä¹‰ä½¿ç”¨æƒ…å†µã€‚

```bash
ts-type-cleaner analyze [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-r, --root <path>` | é¡¹ç›®æ ¹ç›®å½• | å½“å‰ç›®å½• |
| `-o, --output <path>` | è¾“å‡ºç›®å½• | `./type-reports` |
| `-t, --threshold <num>` | å¥åº·åˆ†æ•°é˜ˆå€¼ | `70` |
| `--include <patterns>` | åŒ…å«æ–‡ä»¶æ¨¡å¼ | `src/**/*.{ts,tsx,vue}` |
| `--exclude <patterns>` | æ’é™¤æ–‡ä»¶æ¨¡å¼ | `node_modules,dist,.git` |
| `--json` | JSON æ ¼å¼è¾“å‡º | `false` |
| `--verbose` | è¯¦ç»†ä¿¡æ¯ | `false` |

### `validate` - ç±»å‹éªŒè¯

æ£€æŸ¥ TypeScript ç¼–è¯‘é”™è¯¯å’Œä»£ç è´¨é‡ã€‚

```bash
ts-type-cleaner validate [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--strict` | ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ | `false` |
| `--fix` | å°è¯•è‡ªåŠ¨ä¿®å¤ | `false` |
| `--json` | JSON æ ¼å¼è¾“å‡º | `false` |

### `check` - å®Œæ•´æ£€æŸ¥

è¿è¡Œå®Œæ•´çš„åˆ†æå’ŒéªŒè¯ï¼Œç”Ÿæˆç»¼åˆæŠ¥å‘Šã€‚

```bash
ts-type-cleaner check [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--format <type>` | æŠ¥å‘Šæ ¼å¼ï¼š`html`\|`markdown`\|`json` | `html` |
| `-t, --threshold <num>` | å¥åº·åˆ†æ•°é˜ˆå€¼ | `70` |

### `quick` - å¿«é€Ÿæ£€æŸ¥

é€‚åˆ CI/CD çš„è½»é‡çº§æ£€æŸ¥ã€‚

```bash
ts-type-cleaner quick [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--silent` | é™é»˜æ¨¡å¼ | `false` |
| `--format <type>` | è¾“å‡ºæ ¼å¼ï¼š`text`\|`json`\|`junit` | `text` |

### `init` - åˆå§‹åŒ–é…ç½®

åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶ã€‚

```bash
ts-type-cleaner init [--force]
```

## âš™ï¸ é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.ts-type-cleaner.json`ï¼š

```json
{
  "rootDir": "./",
  "outputDir": "./type-reports",
  "verbose": false,
  "strict": false,
  "include": ["src/**/*.{ts,tsx,vue}"],
  "exclude": ["node_modules", "dist", ".git", "**/*.d.ts"],
  "threshold": 70,
  "ignoreVueComponentTypes": true,
  "ignorePatterns": [
    "^Props$",
    "^Emits$", 
    "/Props$/",
    "/Events?$/"
  ]
}
```

## ğŸ“Š å¥åº·è¯„åˆ†ç®—æ³•

é¡¹ç›®å¥åº·åˆ†æ•°åŸºäºä»¥ä¸‹å› ç´ è®¡ç®—ï¼š

- **åŸºç¡€åˆ†ï¼š** 100 åˆ†
- **æœªä½¿ç”¨ç±»å‹ï¼š** æ¯ä¸ªæ‰£ 40% æƒé‡
- **é‡å¤å®šä¹‰ï¼š** æ¯ä¸ªæ‰£ 30% æƒé‡
- **å¤æ‚åº¦å¥–åŠ±ï¼š** å¤§å‹é¡¹ç›®è·å¾—é¢å¤–åŠ åˆ†

**è¯„çº§æ ‡å‡†ï¼š**
- 90+ åˆ†ï¼šğŸ‰ ä¼˜ç§€
- 70-89 åˆ†ï¼šâœ… è‰¯å¥½
- 50-69 åˆ†ï¼šâš ï¸ éœ€æ”¹è¿›
- 50- åˆ†ï¼šâŒ éœ€è¦ä¿®å¤

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. é¡¹ç›®é‡æ„å‰çš„å‡†å¤‡

```bash
# å…¨é¢ä½“æ£€
ts-type-cleaner check --format html --verbose

# æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šï¼Œåˆ¶å®šæ¸…ç†è®¡åˆ’
```

### 2. æŒç»­é›†æˆè´¨é‡é—¨ç¦

```bash
# åœ¨ CI è„šæœ¬ä¸­æ·»åŠ 
ts-type-cleaner quick --threshold 80 --format junit

# GitHub Actions ç¤ºä¾‹
- name: TypeScript Type Check
  run: |
    npx ts-type-cleaner quick --threshold 85
    if [ $? -ne 0 ]; then exit 1; fi
```

### 3. ä»£ç å®¡æŸ¥è¾…åŠ©

```bash
# ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š
ts-type-cleaner check --format markdown --output ./review-reports

# å°†æŠ¥å‘Šé™„åŠ åˆ° PR æè¿°ä¸­
```

### 4. å®šæœŸç»´æŠ¤æ¸…ç†

```bash
# æ¯å‘¨è¿è¡Œçš„æ¸…ç†è„šæœ¬
#!/bin/bash
echo "ğŸ§¹ å¼€å§‹ç±»å‹æ¸…ç†..."
ts-type-cleaner analyze --threshold 85
ts-type-cleaner validate --strict
echo "âœ… æ¸…ç†å®Œæˆ"
```

## ğŸ“‹ ç”Ÿæˆçš„æŠ¥å‘Š

### HTML æŠ¥å‘Šç‰¹æ€§
- ğŸ“Š å¯äº¤äº’çš„ç»Ÿè®¡å›¾è¡¨
- ğŸ” è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡
- ğŸ’¡ æ™ºèƒ½ä¿®å¤å»ºè®®
- ğŸ¨ ç°ä»£åŒ– UI è®¾è®¡

### Markdown æŠ¥å‘Šå†…å®¹
- ğŸ“ˆ é¡¹ç›®å¥åº·æ¦‚è§ˆ
- ğŸ“ æœªä½¿ç”¨ç±»å‹æ¸…å•
- ğŸ”§ é”™è¯¯ä¿®å¤æŒ‡å—
- ğŸ’­ æœ€ä½³å®è·µå»ºè®®

### JSON æŠ¥å‘Šç”¨é€”
- ğŸ”Œ ä¸å…¶ä»–å·¥å…·é›†æˆ
- ğŸ“ˆ å†å²æ•°æ®åˆ†æ
- ğŸ¤– è‡ªåŠ¨åŒ–å¤„ç†

## ğŸ¤” å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸäº›æˆ‘ç¡®å®åœ¨ç”¨çš„ç±»å‹è¢«æ ‡è®°ä¸º"æœªä½¿ç”¨"ï¼Ÿ

**A:** å¯èƒ½çš„åŸå› ï¼š
- åªåœ¨ç±»å‹æ–­è¨€ä¸­ä½¿ç”¨ï¼š`as UserType`
- ä»…åœ¨æ³¨é‡Šä¸­å¼•ç”¨
- é€šè¿‡åŠ¨æ€å¯¼å…¥ä½¿ç”¨
- ä½œä¸ºå…¶ä»–åº“çš„æ¥å£çº¦æŸ

**è§£å†³æ–¹æ¡ˆï¼š**
åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¿½ç•¥æ¨¡å¼ï¼Œæˆ–ä½¿ç”¨ `// @ts-type-cleaner-ignore` æ³¨é‡Šã€‚

### Q: å¦‚ä½•æé«˜å¥åº·åˆ†æ•°ï¼Ÿ

**A:** æŒ‰ä¼˜å…ˆçº§æ’åºï¼š
1. **ä¿®å¤ç±»å‹é”™è¯¯**ï¼ˆå½±å“æœ€å¤§ï¼‰
2. **åˆ é™¤çœŸæ­£æœªä½¿ç”¨çš„ç±»å‹**
3. **åˆå¹¶é‡å¤çš„ç±»å‹å®šä¹‰**
4. **ä¼˜åŒ–ç±»å‹ç»“æ„**

### Q: æ”¯æŒ Vue é¡¹ç›®å—ï¼Ÿ

**A:** å®Œå…¨æ”¯æŒï¼å·¥å…·èƒ½å¤Ÿï¼š
- è§£æ `.vue` æ–‡ä»¶ä¸­çš„ `<script lang="ts">` å—
- æ™ºèƒ½å¿½ç•¥ Vue ç»„ä»¶å†…éƒ¨ç±»å‹ï¼ˆPropsã€Emits ç­‰ï¼‰
- åˆ†æ Vue 3 Composition API ç±»å‹ä½¿ç”¨

### Q: å¯ä»¥åœ¨ monorepo ä¸­ä½¿ç”¨å—ï¼Ÿ

**A:** å¯ä»¥ã€‚å»ºè®®ï¼š
```bash
# åˆ†æç‰¹å®šåŒ…
ts-type-cleaner analyze --root ./packages/core

# æˆ–è€…åœ¨æ¯ä¸ªåŒ…çš„æ ¹ç›®å½•åˆ†åˆ«è¿è¡Œ
cd packages/ui && ts-type-cleaner check
cd packages/utils && ts-type-cleaner check
```

## ğŸ”§ æŠ€æœ¯è¦æ±‚

- **Node.js:** 16.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **TypeScript:** 4.0+ é¡¹ç›®
- **é…ç½®æ–‡ä»¶:** é¡¹ç›®æ ¹ç›®å½•éœ€è¦ `tsconfig.json`

## ğŸ† æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥
```bash
# å»ºè®®é¢‘ç‡
# å¼€å‘é˜¶æ®µï¼šæ¯å¤© quick æ£€æŸ¥
# å‘å¸ƒå‰ï¼šå®Œæ•´ check
# é‡æ„æ—¶ï¼šè¯¦ç»† analyze
```

### 2. å›¢é˜Ÿè§„èŒƒ
- è®¾ç½®ç»Ÿä¸€çš„å¥åº·åˆ†æ•°é˜ˆå€¼
- å°†æ£€æŸ¥é›†æˆåˆ° pre-commit hooks
- å®šæœŸåˆ†äº«æŠ¥å‘Šè¿›è¡Œä»£ç å®¡æŸ¥

### 3. æ¸è¿›å¼æ”¹è¿›
- å…ˆä¿®å¤æ˜æ˜¾çš„é”™è¯¯
- é€æ­¥æé«˜é˜ˆå€¼æ ‡å‡†
- è®°å½•æ”¹è¿›è¿‡ç¨‹å’Œæ•ˆæœ

### 4. è‡ªåŠ¨åŒ–æµç¨‹
```yaml
# .github/workflows/type-check.yml
name: Type Quality Check
on: [push, pull_request]
jobs:
  type-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Type quality check
        run: npx ts-type-cleaner quick --threshold 80
```

## ğŸ¨ è¾“å‡ºæ ¼å¼ç¤ºä¾‹

### ç®€æ´æ¨¡å¼
```
âœ… ç±»å‹æ£€æŸ¥é€šè¿‡ (è¯„åˆ†: 87/100)
```

### è¯¦ç»†æ¨¡å¼
```
ğŸ› ï¸ TypeScript ç±»å‹åˆ†ææŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š åˆ†æç»Ÿè®¡
ğŸ“ˆ éªŒè¯ç»“æœ
ğŸ’¡ æ”¹è¿›å»ºè®®
ğŸ“‹ è¯¦ç»†æŠ¥å‘Š: ./type-reports/report-2024-01-15.html
```

---

**è®©ä½ çš„ TypeScript é¡¹ç›®ä¿æŒæœ€ä½³çŠ¶æ€ï¼** ğŸš€

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æ Issueã€‚