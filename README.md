# ğŸ› ï¸ TypeScript Type Cleaner

ä¸€ä¸ªé«˜æ•ˆçš„ TypeScript é¡¹ç›®ç±»å‹åˆ†æå’Œæ¸…ç†å·¥å…·ã€‚è‡ªåŠ¨å‘ç°æœªä½¿ç”¨çš„ç±»å‹å®šä¹‰ã€é‡å¤å®šä¹‰å’Œç±»å‹é”™è¯¯ï¼Œå¸®ä½ ä¿æŒä»£ç æ•´æ´ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹

```bash
# å…¨å±€å®‰è£…
npm install -g ts-type-cleaner

# æˆ–è€…ç›´æ¥ä½¿ç”¨
npx ts-type-cleaner analyze
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ” æ™ºèƒ½åˆ†æ**ï¼šæ·±åº¦æ‰«æ TypeScript/Vue é¡¹ç›®ï¼Œç²¾ç¡®è¯†åˆ«ç±»å‹ä½¿ç”¨æƒ…å†µ
- **ğŸ§¹ è‡ªåŠ¨æ¸…ç†**ï¼šæ‰¾å‡ºæœªä½¿ç”¨çš„ç±»å‹å®šä¹‰å’Œé‡å¤å£°æ˜
- **ğŸ”§ ç±»å‹éªŒè¯**ï¼šæ£€æŸ¥ TypeScript ç¼–è¯‘é”™è¯¯å’Œä»£ç è´¨é‡é—®é¢˜
- **ğŸ“Š ç²¾ç¾æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„ Markdown æŠ¥å‘Šï¼Œç¾è§‚çš„ç»ˆç«¯è¾“å‡º
- **âš¡ CI/CD å‹å¥½**ï¼šæ”¯æŒå¿«é€Ÿæ£€æŸ¥æ¨¡å¼ï¼Œé€‚åˆæŒç»­é›†æˆ

## ğŸš€ åŸºæœ¬ç”¨æ³•

### å¿«é€Ÿåˆ†æ

```bash
# åˆ†æå½“å‰é¡¹ç›®
ts-type-cleaner analyze

# æŒ‡å®šç›®å½•å’Œé˜ˆå€¼
ts-type-cleaner analyze --root ./src --threshold 85
```

**ç²¾ç¾çš„ç»ˆç«¯è¾“å‡ºï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ› ï¸  TypeScript ç±»å‹åˆ†ææŠ¥å‘Š                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   ç»¼åˆè¯„åˆ†  100/100  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 

   ğŸ“ æºæ–‡ä»¶   255    ğŸ¯ ç±»å‹å®šä¹‰   53  
   ğŸ”— ä½¿ç”¨å¼•ç”¨ 1157   ğŸ—‘ï¸ æœªä½¿ç”¨     0  
                      âš ï¸ é‡å¤å®šä¹‰   0  

ğŸ’¡ æ”¹è¿›å»ºè®®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. ğŸ‰ ç±»å‹ç³»ç»ŸçŠ¶æ€è‰¯å¥½ï¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ‰ ä»£ç è´¨é‡ä¼˜ç§€ï¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ è¯¦ç»†æŠ¥å‘Š: ./type-reports/type-analysis-2025-07-31.md
```

### å®Œæ•´æ£€æŸ¥

```bash
# åˆ†æ + éªŒè¯ + ç”ŸæˆæŠ¥å‘Š
ts-type-cleaner check --threshold 80

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
ts-type-cleaner analyze --output ./reports
```

## ğŸ“‹ å‘½ä»¤å‚è€ƒ

### `analyze` - ç±»å‹ä½¿ç”¨åˆ†æ

æ·±åº¦åˆ†æé¡¹ç›®ä¸­çš„ç±»å‹å®šä¹‰ä½¿ç”¨æƒ…å†µã€‚

```bash
ts-type-cleaner analyze [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-r, --root <path>` | é¡¹ç›®æ ¹ç›®å½• | å½“å‰ç›®å½• |
| `-o, --output <path>` | è¾“å‡ºç›®å½• | `./type-reports` |
| `-t, --threshold <num>` | å¥åº·åˆ†æ•°é˜ˆå€¼ | `70` |
| `--include <patterns>` | åŒ…å«æ–‡ä»¶æ¨¡å¼ | `src/**/*.{ts,tsx,vue}` |
| `--exclude <patterns>` | æ’é™¤æ–‡ä»¶æ¨¡å¼ | `node_modules,dist,.git` |
| `--json` | JSON æ ¼å¼è¾“å‡º | `false` |
| `-v, --verbose` | è¯¦ç»†ä¿¡æ¯ | `false` |

### `check` - å®Œæ•´æ£€æŸ¥

è¿è¡Œå®Œæ•´çš„åˆ†æå’ŒéªŒè¯ï¼Œç”Ÿæˆç»¼åˆæŠ¥å‘Šã€‚

```bash
ts-type-cleaner check [options]
```

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-t, --threshold <num>` | å¥åº·åˆ†æ•°é˜ˆå€¼ | `70` |

## âš™ï¸ ç¼–ç¨‹å¼ä½¿ç”¨

```javascript
import { TypeAnalyzer, analyzeProject, quickCheck } from 'ts-type-cleaner'

// æ–¹å¼1: ä½¿ç”¨ç±»
const analyzer = new TypeAnalyzer({
  rootDir: process.cwd(),
  verbose: true,
  include: ['src/**/*.{ts,tsx,vue}'],
  exclude: ['node_modules', 'dist']
})

const result = await analyzer.analyze()
console.log(`å‘ç° ${result.statistics.unusedTypes} ä¸ªæœªä½¿ç”¨ç±»å‹`)

// æ–¹å¼2: ä½¿ç”¨ä¾¿æ·å‡½æ•°
const result = await analyzeProject({
  rootDir: './src',
  threshold: 80
})

// æ–¹å¼3: å¿«é€Ÿæ£€æŸ¥ï¼ˆé€‚åˆCI/CDï¼‰
const checkResult = await quickCheck({ threshold: 70 })
if (!checkResult.passed) {
  console.error(checkResult.summary)
  process.exit(1)
}
```

## ğŸ“Š å¥åº·è¯„åˆ†ç®—æ³•

é¡¹ç›®å¥åº·åˆ†æ•°åŸºäºä»¥ä¸‹å› ç´ è®¡ç®—ï¼š

### å¥åº·åˆ†æ•° (Health Score)
- **åŸºç¡€åˆ†ï¼š** 100 åˆ†
- **æœªä½¿ç”¨ç±»å‹æ‰£åˆ†ï¼š** æ¯ä¸ªæœªä½¿ç”¨ç±»å‹æŒ‰æ¯”ä¾‹æ‰£åˆ†ï¼ˆæœ€å¤š50åˆ†ï¼‰
- **é‡å¤å®šä¹‰æ‰£åˆ†ï¼š** æ¯ä¸ªé‡å¤å®šä¹‰æŒ‰æ¯”ä¾‹æ‰£åˆ†ï¼ˆæœ€å¤š40åˆ†ï¼‰

### éªŒè¯åˆ†æ•° (Validation Score)
- **åŸºç¡€åˆ†ï¼š** 100 åˆ†
- **å…³é”®é”™è¯¯ï¼š** æ¯ä¸ªæ‰£15åˆ†ï¼ˆç±»å‹ä¸åŒ¹é…ã€å±æ€§ç¼ºå¤±ç­‰ï¼‰
- **æ™®é€šé”™è¯¯ï¼š** æ¯ä¸ªæ‰£8åˆ†
- **è­¦å‘Šï¼š** æ¯ä¸ªæ‰£1åˆ†ï¼ˆæœ€å¤šæ‰£20åˆ†ï¼‰

### ç»¼åˆè¯„åˆ†
**æœ€ç»ˆåˆ†æ•° = (å¥åº·åˆ†æ•° + éªŒè¯åˆ†æ•°) / 2**

**è¯„çº§æ ‡å‡†ï¼š**
- 90+ åˆ†ï¼šğŸ‰ ä¼˜ç§€
- 80-89 åˆ†ï¼šâœ… è‰¯å¥½
- 60-79 åˆ†ï¼šâš ï¸ éœ€æ”¹è¿›
- 60- åˆ†ï¼šâŒ éœ€è¦ä¿®å¤

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. é¡¹ç›®é‡æ„å‰çš„å‡†å¤‡

```bash
# å…¨é¢ä½“æ£€ï¼Œç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
ts-type-cleaner analyze --verbose --output ./refactor-reports

# æŸ¥çœ‹æŠ¥å‘Šï¼Œåˆ¶å®šæ¸…ç†è®¡åˆ’
```

### 2. æŒç»­é›†æˆè´¨é‡é—¨ç¦

```bash
# GitHub Actions ç¤ºä¾‹
- name: TypeScript Type Check
  run: |
    npx ts-type-cleaner check --threshold 80
    if [ $? -ne 0 ]; then 
      echo "âŒ ç±»å‹æ£€æŸ¥æœªé€šè¿‡"
      exit 1
    fi
```

### 3. å®šæœŸç»´æŠ¤æ¸…ç†

```bash
# æ¯å‘¨è¿è¡Œçš„æ¸…ç†è„šæœ¬
#!/bin/bash
echo "ğŸ§¹ å¼€å§‹ç±»å‹æ¸…ç†..."
npx ts-type-cleaner analyze --threshold 85
echo "âœ… æ¸…ç†å®Œæˆ"
```

## ğŸ“‹ ç”Ÿæˆçš„æŠ¥å‘Š

### Markdown æŠ¥å‘Šå†…å®¹
- ğŸ“ˆ é¡¹ç›®å¥åº·æ¦‚è§ˆä¸è¯„åˆ†è¯¦æƒ…
- ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡è¡¨æ ¼å±•ç¤º
- ğŸš¨ ç±»å‹é”™è¯¯è¯¦ç»†åˆ—è¡¨
- ğŸ—‘ï¸ æœªä½¿ç”¨ç±»å‹æ¸…å•
- ğŸ’¡ æ™ºèƒ½æ”¹è¿›å»ºè®®

### JSON è¾“å‡ºæ ¼å¼
```javascript
{
  "timestamp": "2025-07-31T...",
  "statistics": {
    "sourceFiles": 255,
    "typeDefinitions": 53,
    "usageReferences": 1157,
    "unusedTypes": 0,
    "duplicateDefinitions": 0,
    "totalErrors": 0,
    "totalWarnings": 0
  },
  "scores": {
    "healthScore": 100,
    "validationScore": 100,
    "overallScore": 100
  },
  "details": {
    "unusedTypes": [],
    "duplicates": [],
    "errors": [],
    "warnings": [],
    "typeDefinitions": {},
    "typeUsages": {}
  },
  "suggestions": ["ğŸ‰ ç±»å‹ç³»ç»ŸçŠ¶æ€è‰¯å¥½ï¼"]
}
```

## ğŸ¤” å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸäº›æˆ‘ç¡®å®åœ¨ç”¨çš„ç±»å‹è¢«æ ‡è®°ä¸º"æœªä½¿ç”¨"ï¼Ÿ

**A:** å¯èƒ½çš„åŸå› ï¼š
- åªåœ¨ç±»å‹æ–­è¨€ä¸­ä½¿ç”¨ï¼š`as UserType`
- ä»…åœ¨æ³¨é‡Šä¸­å¼•ç”¨
- é€šè¿‡åŠ¨æ€å¯¼å…¥ä½¿ç”¨
- ä½œä¸ºå…¶ä»–åº“çš„æ¥å£çº¦æŸ

**è§£å†³æ–¹æ¡ˆï¼š**
æ£€æŸ¥ç±»å‹æ˜¯å¦çœŸçš„è¢«ä½¿ç”¨ï¼Œæˆ–è€…åœ¨é…ç½®ä¸­æ·»åŠ å¿½ç•¥æ¨¡å¼ã€‚

### Q: æ”¯æŒ Vue é¡¹ç›®å—ï¼Ÿ

**A:** å®Œå…¨æ”¯æŒï¼å·¥å…·èƒ½å¤Ÿï¼š
- è§£æ `.vue` æ–‡ä»¶ä¸­çš„ `<script lang="ts">` å—
- æ™ºèƒ½å¿½ç•¥ Vue ç»„ä»¶å†…éƒ¨ç±»å‹ï¼ˆPropsã€Emits ç­‰ï¼‰
- åˆ†æ Vue 3 Composition API ç±»å‹ä½¿ç”¨

### Q: å¦‚ä½•æé«˜å¥åº·åˆ†æ•°ï¼Ÿ

**A:** æŒ‰ä¼˜å…ˆçº§æ’åºï¼š
1. **ä¿®å¤ç±»å‹é”™è¯¯**ï¼ˆå½±å“æœ€å¤§ï¼‰
2. **åˆ é™¤çœŸæ­£æœªä½¿ç”¨çš„ç±»å‹**
3. **åˆå¹¶é‡å¤çš„ç±»å‹å®šä¹‰**
4. **ä¼˜åŒ–ç±»å‹ç»“æ„**

### Q: å¯ä»¥åœ¨ monorepo ä¸­ä½¿ç”¨å—ï¼Ÿ

**A:** å¯ä»¥ã€‚å»ºè®®ï¼š
```bash
# åˆ†æç‰¹å®šåŒ…
ts-type-cleaner analyze --root ./packages/core

# æˆ–è€…åœ¨æ¯ä¸ªåŒ…çš„æ ¹ç›®å½•åˆ†åˆ«è¿è¡Œ
cd packages/ui && ts-type-cleaner check
cd packages/utils && ts-type-cleaner check
```

## ğŸ”§ æŠ€æœ¯è¦æ±‚

- **Node.js:** 16.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **TypeScript:** æ”¯æŒ 4.0+ é¡¹ç›®
- **é…ç½®æ–‡ä»¶:** é¡¹ç›®æ ¹ç›®å½•éœ€è¦ `tsconfig.json`ï¼ˆå¯é€‰ï¼‰

## ğŸ† æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥
```bash
# å»ºè®®é¢‘ç‡
# å¼€å‘é˜¶æ®µï¼šæ¯å¤©è¿è¡Œ check
# å‘å¸ƒå‰ï¼šå®Œæ•´ analyze
# é‡æ„æ—¶ï¼šè¯¦ç»† analyze --verbose
```

### 2. å›¢é˜Ÿè§„èŒƒ
- è®¾ç½®ç»Ÿä¸€çš„å¥åº·åˆ†æ•°é˜ˆå€¼ï¼ˆå»ºè®®80+ï¼‰
- å°†æ£€æŸ¥é›†æˆåˆ° pre-commit hooks
- å®šæœŸåˆ†äº«æŠ¥å‘Šè¿›è¡Œä»£ç å®¡æŸ¥

### 3. æ¸è¿›å¼æ”¹è¿›
- å…ˆä¿®å¤æ˜æ˜¾çš„é”™è¯¯
- é€æ­¥æé«˜é˜ˆå€¼æ ‡å‡†
- è®°å½•æ”¹è¿›è¿‡ç¨‹å’Œæ•ˆæœ

## ğŸ¨ è¾“å‡ºæ ¼å¼ç¤ºä¾‹

### æˆåŠŸç¤ºä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ› ï¸  TypeScript ç±»å‹åˆ†ææŠ¥å‘Š                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ç»¼åˆè¯„åˆ†  87/100  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 

ğŸ’¡ æ”¹è¿›å»ºè®®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. ğŸ’¡ æ¸…ç† 3 ä¸ªæœªä½¿ç”¨çš„ç±»å‹å®šä¹‰
   2. ğŸ”´ ä¿®å¤ 1 ä¸ªå…³é”®ç±»å‹é”™è¯¯

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              âœ…  ç±»å‹ç³»ç»Ÿå¥åº·               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é”™è¯¯ç¤ºä¾‹
```
ğŸš¨ ç±»å‹é”™è¯¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. src/components/UserCard.tsx:15
      â–¶ Property 'username' does not exist on type 'User'
      [TS2339]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          âŒ å‘ç°ç±»å‹é”™è¯¯ï¼Œéœ€è¦ä¿®å¤          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**è®©ä½ çš„ TypeScript é¡¹ç›®ä¿æŒæœ€ä½³çŠ¶æ€ï¼** ğŸš€

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æ [Issue](https://github.com/ChenyCHENYU/ts-type-cleaner/issues)ã€‚